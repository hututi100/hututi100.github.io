<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <script src="https://accounts.google.com/gsi/client" async></script>

    <script>
      /* JWT 디코딩 함수 */
      function decodeJWT(token) {
        let base64Url = token.split(".")[1];
        let base64 = base64Url.replace(/-/g, "+").replace(/_/g, "/");
        let jsonPayload = decodeURIComponent(
          atob(base64)
            .split("")
            .map(function (c) {
              return "%" + ("00" + c.charCodeAt(0).toString(16)).slice(-2);
            })
            .join("")
        );
        return JSON.parse(jsonPayload);
      }

      /* 로그인 성공 시 실행되는 함수 */
      function handleCredentialResponse(response) {
        const responsePayload = decodeJWT(response.credential);

        // 로그인 정보 저장
        localStorage.setItem("user", JSON.stringify(responsePayload));

        // UI 업데이트
        renderUserUI(responsePayload);
      }

      /* 로그아웃 */
      function logout() {
        localStorage.removeItem("user");
        location.reload();
      }

      /* 로그인 상태에 따라 UI를 그리는 함수 */
      function renderUserUI(user) {
        // Google 로그인 버튼 강제 숨김 (렌더링 지연 대비)
const hideGoogleBtn = setInterval(() => {
  const btn = document.querySelector(".g_id_signin");
  if (btn) {
    btn.style.display = "none";
    clearInterval(hideGoogleBtn);
  }
}, 100);




        // 환영 메시지 표시
        document.body.insertAdjacentHTML(
          "afterbegin",
          `
          <div id="welcomeBox" style="padding:10px;">
            <img src="${user.picture}" width="50" style="border-radius:50%; vertical-align:middle;">
            <span style="font-size:18px; margin-left:10px;">환영합니다, ${user.name}님!</span>
          </div>
          `
        );
      }
/* 페이지 로드 시 로그인 상태 확인 */
      window.onload = function () {
        const savedUser = localStorage.getItem("user");
        if (savedUser) {
          const user = JSON.parse(savedUser);
          renderUserUI(user);
        }
      };
    </script>

       
       
      
    
    <title>Hututi World</title>
      
       <style>
           
           body{ 
           background-color: #c0eeff}
           
        header{
            text-align:center;
            padding:20px;
           }
           
           main{display: grid;
           grid-template-columns: 170px 1fr;
               max-width: 800px;
               margin: 0 auto;
           }
           
           nav,content{
               border:1px solid gray;
               height: 500px;
               background-color: white;
           }
           
           nav{border-right:hidden;
           border-radius: 20px 0 0 20px;}
      
           nav ul{
               line-height: 2;
           }
      
           content{
               border-radius: 0 20px 20px 0;
           }
           
           a:link,a:visited,a:active {color:black;
           text-decoration:none;}
           
           a:hover{text-decoration-line:underline}
           
           #작가소개{
               text-align: center;
             padding-top:20px;
             padding-bottom: 20px;
             margin-top:0;
             background-color: antiquewhite;
               border-radius: 0 20px 0 0;
           }
           
           #작가소개2{
               padding-top:20px;
               text-align: center;
           }
           
           #artistimage{
               border-radius:50%;
           }
           
           footer{margin-top:10px;
           margin-bottom:60px;
          text-align: center;
           }
           
           #night_day{border:1px solid;
               border-color: gray;
           background-color: antiquewhite;
           border-radius:40px}

           
           
    </style>

    </head>
   
    <body>
    
    <!-- Google Identity Services 설정 -->
    <div
      id="g_id_onload"
      data-auto_prompt="false"
      data-callback="handleCredentialResponse"
      data-client_id="531232052628-6n06d011qt40tcndqpie2qq4r2neq0cj.apps.googleusercontent.com"
    ></div>

    <!-- Google 로그인 버튼 -->
    <div class="g_id_signin"></div>

    <!-- 로그아웃 버튼 -->
    <button onclick="logout()">로그아웃</button>


       <header>
        <h1><a href="index.html">Hututi World</a></h1>
        </header>
        
        <main>
        <nav>
            <ul>
                <li><a href="1.html">작가소개</a></li>
                <li><a href="">소설</a></li>
                <li><a href="">갤러리</a></li>
                <li><a href="">상품</a></li>
                <li><a href="">블로그</a></li>
                <li><a href="">게시판</a></li>
            </ul>
        </nav>
        
<content>
    <h2 id="작가소개">작가소개</h2>
               <div id="작가소개2">
                <img src="후투티.png" width="200" alt="작가 이미지" id="artistimage">
                <p>후투티</p>
                <p>- OO플랫폼에서 ㅁㅁ작품 연재중</p>
                </div>
</content>
        </main>
               
               
            <footer>
               <input id="night_day" type="button" value="night" onclick="
         var target = document.querySelector('body');
        if(document.querySelector('#night_day').value === 'night') {
        target.style.backgroundColor='black';
        target.style.color = 'white';
        document.querySelector('#night_day').value = 'day';
        } else {
        target.style.backgroundColor='lightblue';
        target.style.color = 'black';
        document.querySelector('#night_day').value = 'night';
        }
        ">
        
           &lt;-- 그닥 쓸모는 없지만 재밌는 버튼 
            </footer>
               
    
               <div id="disqus_thread"></div>
<script>
    /**
    *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
    *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables    */
    /*
    var disqus_config = function () {
    self.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
    self.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
    };
    */
    (function() { // DON'T EDIT BELOW self LINE
    var d = document, s = d.createElement('script');
    s.src = 'https://hututi100.disqus.com/embed.js';
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
                
                
                <!--Start of Tawk.to Script-->
<script type="text/javascript">
var Tawk_API=Tawk_API||{}, Tawk_LoadStart=new Date();
(function(){
var s1=document.createElement("script"),s0=document.getElementsByTagName("script")[0];
s1.async=true;
s1.src='https://embed.tawk.to/6952fac9d5d3bd197b4d761a/1jdm278nn';
s1.charset='UTF-8';
s1.setAttribute('crossorigin','*');
s0.parentNode.insertBefore(s1,s0);
})();
</script>
<!--End of Tawk.to Script-->
                
    

    </body>
</html>

